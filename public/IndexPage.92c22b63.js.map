{"mappings":"6YAAA,IAAAA,EAAAC,EAAA,8HAkBA,MAAMC,EAAgD,EAlBtDC,QAkByDA,KACvDH,EAAAI,KAAAJ,EAAAK,SAAA,WACEL,EAAAM,IAACC,EAAAC,KAAI,CApBTC,SAAA,iCAqBIT,EAAAM,IAACC,EAAAG,KAAI,CACHC,MAAK,WACLC,GAAIC,EAAAH,KACJI,GAAIX,EAAU,QAAU,QACxBY,GAAE,IAzBRN,SAAA,sBAgCMO,EAAuB,IAC3BhB,EAAAI,KAACG,EAAAU,WAAU,CAACC,SAAQ,IAAKC,SAAQ,kBAC/BnB,EAAAM,IAACC,EAAAa,SAAQ,CAACC,OAAM,SAChBrB,EAAAM,IAACC,EAAAa,SAAQ,CAACC,OAAM,SAChBrB,EAAAM,IAACC,EAAAa,SAAQ,CAACC,OAAM,SAChBrB,EAAAM,IAACC,EAAAa,SAAQ,CAACC,OAAM,SAChBrB,EAAAM,IAACC,EAAAa,SAAQ,CAACC,OAAM,SAChBrB,EAAAM,IAACC,EAAAa,SAAQ,CAACC,OAAM,SAChBrB,EAAAM,IAACC,EAAAa,SAAQ,CAACC,OAAM,YAIdC,EAAwBC,EAAAC,oBAAoBxB,EAAAM,IAACJ,EAAY,SAqD/DuB,EAnDmD,EA9CnDtB,QA8CsDA,MACpD,MAAMuB,EAAWC,EAAAC,eACfzB,EAAU0B,EAAAC,SAASC,KAAKC,MAAO,QAAKC,GAEhCC,EAAcL,EAAAM,OAAOT,EAAU,UAC/BU,EAAOC,EAAAC,WAAWZ,EAASa,UAEjC,OACEvC,EAAAI,KAACG,EAAAiC,IAAG,CAACC,EAAC,cACJzC,EAAAI,KAACG,EAAAmC,QAAO,CAACC,GAAE,IAAKC,GAAE,+BACDV,KAEjBlC,EAAAM,IAACgB,EAAqB,CAACnB,QAASA,EA1DtCM,SA2DQT,EAAAM,IAACuC,EAAAC,QAAoB,CA3D7BrC,SA4DUT,EAAAI,KAAC2C,EAAAC,SAAQ,CAACC,SAAUjD,EAAAM,IAACU,EAAU,cAC7BhB,EAAAM,IAAC4C,EAAAJ,QAAI,CAACV,KAAMA,IACZpC,EAAAI,KAACG,EAAAC,KAAI,CAACO,GAAE,cACLZ,GACCH,EAAAI,KAAAJ,EAAAK,SAAA,WACEL,EAAAM,IAACC,EAAAG,KAAI,CAACC,MAAK,WAAYC,GAAIC,EAAAH,KAAYI,GAAE,QAASqC,GAAE,IAjEtE1C,SAAA,aAqEkBT,EAAAM,IAACC,EAAAG,KAAI,CAACC,MAAK,WAAYC,GAAIC,EAAAH,KAAYI,GAAE,QAASsC,GAAE,IArEtE3C,SAAA,uBAyEkBT,EAAAM,IAACC,EAAAG,KAAI,CAACC,MAAK,WAAYC,GAAIC,EAAAH,KAAYI,GAAE,WAAYuC,GAAE,IAzEzE5C,SAAA,yBA8EeN,GACCH,EAAAI,KAAAJ,EAAAK,SAAA,WACEL,EAAAM,IAACC,EAAAG,KAAI,CAACC,MAAK,WAAYC,GAAIC,EAAAH,KAAYI,GAAE,QAASqC,GAAE,IAhFtE1C,SAAA,aAoFkBT,EAAAM,IAACC,EAAAG,KAAI,CAACC,MAAK,WAAYC,GAAIC,EAAAH,KAAYI,GAAE,IAAKuC,GAAE,IApFlE5C,SAAA","sources":["src/components/IndexPage.tsx"],"sourcesContent":["import React, { Suspense } from \"react\";\nimport {\n  Box,\n  Heading,\n  Link,\n  SimpleGrid,\n  Skeleton,\n  Text,\n} from \"@chakra-ui/react\";\nimport { Link as RouterLink } from \"react-router-dom\";\nimport { format, addWeeks } from \"date-fns\";\nimport { useQueryDB } from \"../db\";\nimport { getMenuDateFor } from \"../utils\";\nimport SessionErrorBoundary from \"./SessionErrorBoundary\";\nimport { createErrorBoundary } from \"./NotFoundErrorBoundary\";\nimport NavBar from \"./NavBar\";\nimport Menu from \"./Menu\";\n\nconst MenuFallback: React.FC<{ preview?: boolean }> = ({ preview }) => (\n  <>\n    <Text>No menu found for this week.</Text>\n    <Link\n      color=\"teal.500\"\n      as={RouterLink}\n      to={preview ? \"/plan\" : \"/edit\"}\n      pb=\"4\"\n    >\n      Add menu items\n    </Link>\n  </>\n);\n\nconst MenuLoader: React.FC = () => (\n  <SimpleGrid spacingY=\"3\" maxWidth=\"300px\">\n    <Skeleton height=\"30px\" />\n    <Skeleton height=\"30px\" />\n    <Skeleton height=\"30px\" />\n    <Skeleton height=\"30px\" />\n    <Skeleton height=\"30px\" />\n    <Skeleton height=\"30px\" />\n    <Skeleton height=\"30px\" />\n  </SimpleGrid>\n);\n\nconst NotFoundErrorBoundary = createErrorBoundary(<MenuFallback />);\n\nconst IndexPage: React.FC<{ preview?: boolean }> = ({ preview }) => {\n  const menuDate = getMenuDateFor(\n    preview ? addWeeks(Date.now(), 1) : undefined\n  );\n  const currentWeek = format(menuDate, \"MMM do\");\n  const menu = useQueryDB(menuDate.toJSON());\n\n  return (\n    <Box p=\"3\">\n      <Heading mt=\"0\" mb=\"4\">\n        Weekly Menu - {currentWeek}\n      </Heading>\n      <NotFoundErrorBoundary preview={preview}>\n        <SessionErrorBoundary>\n          <Suspense fallback={<MenuLoader />}>\n            <Menu menu={menu} />\n            <Text pb=\"4\">\n              {preview || (\n                <>\n                  <Link color=\"teal.500\" as={RouterLink} to=\"/edit\" pr=\"3\">\n                    Edit\n                  </Link>\n                  |\n                  <Link color=\"teal.500\" as={RouterLink} to=\"/plan\" px=\"3\">\n                    Plan next week\n                  </Link>\n                  |\n                  <Link color=\"teal.500\" as={RouterLink} to=\"/preview\" pl=\"3\">\n                    Preview next week\n                  </Link>\n                </>\n              )}\n              {preview && (\n                <>\n                  <Link color=\"teal.500\" as={RouterLink} to=\"/plan\" pr=\"3\">\n                    Plan\n                  </Link>\n                  |\n                  <Link color=\"teal.500\" as={RouterLink} to=\"/\" pl=\"3\">\n                    Return\n                  </Link>\n                </>\n              )}\n            </Text>\n          </Suspense>\n        </SessionErrorBoundary>\n      </NotFoundErrorBoundary>\n    </Box>\n  );\n};\n\nexport default IndexPage;\n"],"names":["$k4ank","parcelRequire","$9354f69d464e3d4d$var$MenuFallback","preview","jsxs","Fragment","jsx","$37woU","Text","children","Link","color","as","$7f4iG","to","pb","$9354f69d464e3d4d$var$MenuLoader","SimpleGrid","spacingY","maxWidth","Skeleton","height","$9354f69d464e3d4d$var$NotFoundErrorBoundary","$hmWjK","createErrorBoundary","$9354f69d464e3d4d$export$2e2bcd8739ae039","menuDate","$8Xs7T","getMenuDateFor","$80TUu","addWeeks","Date","now","undefined","currentWeek","format","menu","$fiQoM","useQueryDB","toJSON","Box","p","Heading","mt","mb","$1k9WB","default","$8T3gX","Suspense","fallback","$hXCME","pr","px","pl"],"version":3,"file":"IndexPage.92c22b63.js.map"}