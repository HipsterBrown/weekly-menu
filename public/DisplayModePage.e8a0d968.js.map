{"mappings":"sbAAA,IAAAA,EAAAC,EAAA,S,6FAQO,MAAMC,EAAyBC,OAAOC,QAAEA,MAC7C,MAAMC,EAAM,IAAIC,IAAIF,EAAQC,KACtBE,EAAWF,EAAIG,aAAaC,IAAI,YAChCC,EAAWL,EAAIG,aAAaC,IAAI,YAEtC,IAAKF,IAAaG,EAChB,MAAM,IAAIC,SAAS,oCAAqC,CAAEC,OAAQ,YAG9D,EAAAC,EAAAC,OAAMP,EAAUG,GAEtB,MAAMK,GAAW,EAAAC,EAAAC,kBACXC,QAAa,EAAAL,EAAAM,SAAQJ,EAASK,UACpC,OAAO,EAAAC,EAAAC,MAAK,C,SAAEP,E,KAAUG,GAAO,E,IAoBjCK,EAjBkC,KAChC,MAAMR,SAAEA,EAAQG,KAAEA,IAAS,EAAAG,EAAAG,iBAIrBC,GAAc,EAAAC,EAAAC,QAAO,IAAIC,KAAKb,GAAW,UAE/C,OACE,EAAAf,EAAA6B,MAACC,EAAAC,IAAG,CAACC,EAAE,I,WACL,EAAAhC,EAAA6B,MAACC,EAAAG,QAAO,CAACC,GAAG,IAAIC,GAAG,I,UAAI,iBACNV,MAEjB,EAAAzB,EAAAoC,KAACC,EAAAC,QAAI,CAACpB,KAAMA,MACR,C","sources":["src/components/DisplayModePage.tsx"],"sourcesContent":["import React from \"react\";\nimport { Box, Heading } from \"@chakra-ui/react\";\nimport { format } from \"date-fns\";\nimport { getMenu, login, Menu as MenuRecord } from \"../db\";\nimport { getMenuDateFor } from \"../utils\";\nimport Menu from \"./Menu\";\nimport { json, LoaderFunction, useLoaderData } from \"react-router\";\n\nexport const loader: LoaderFunction = async ({ request }) => {\n  const url = new URL(request.url);\n  const username = url.searchParams.get(\"username\");\n  const password = url.searchParams.get(\"password\");\n\n  if (!username || !password) {\n    throw new Response(\"Must be authenticated to continue\", { status: 401 });\n  }\n\n  await login(username, password);\n\n  const menuDate = getMenuDateFor();\n  const menu = await getMenu(menuDate.toJSON());\n  return json({ menuDate, menu });\n};\n\nconst DisplayModePage: React.FC = () => {\n  const { menuDate, menu } = useLoaderData() as {\n    menuDate: string;\n    menu: PouchDB.Core.ExistingDocument<MenuRecord>;\n  };\n  const currentWeek = format(new Date(menuDate), \"MMM do\");\n\n  return (\n    <Box p=\"3\">\n      <Heading mt=\"0\" mb=\"4\">\n        Weekly Menu - {currentWeek}\n      </Heading>\n      <Menu menu={menu} />\n    </Box>\n  );\n};\n\nexport default DisplayModePage;\n"],"names":["$k4ank","parcelRequire","$713aed745208d714$export$f4c5de44377d2946","async","request","url","URL","username","searchParams","get","password","Response","status","$fiQoM","login","menuDate","$8Xs7T","getMenuDateFor","menu","getMenu","toJSON","$3T949","json","$713aed745208d714$export$2e2bcd8739ae039","useLoaderData","currentWeek","$80TUu","format","Date","jsxs","$1idYv","Box","p","Heading","mt","mb","jsx","$hXCME","default"],"version":3,"file":"DisplayModePage.e8a0d968.js.map"}