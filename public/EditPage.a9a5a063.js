function e(e,n,t,a){Object.defineProperty(e,n,{get:t,set:a,enumerable:!0,configurable:!0})}var n=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequirec4d7;n.register("jirsC",(function(t,a){var o;o=t.exports,Object.defineProperty(o,"__esModule",{value:!0,configurable:!0}),e(t.exports,"loader",(()=>f)),e(t.exports,"action",(()=>p)),e(t.exports,"default",(()=>g));var r=n("k4ank");n("8T3gX");var i=n("1idYv"),s=n("80TUu"),u=n("3T949"),d=n("fiQoM"),l=n("8Xs7T"),c=n("6bwyZ");const m={M:"",T:"",W:"",Th:"",F:"",Sa:"",Su:""},f=async({request:e})=>{await(0,d.getSession)();const n=new URL(e.url).pathname.includes("plan"),t=(0,l.getMenuDateFor)(n?(0,s.addWeeks)(Date.now(),1):void 0);try{const e=await(0,d.getMenu)(t.toJSON());return(0,u.json)({menuDate:t,menu:e})}catch(e){if(e instanceof Response&&404===e.status)return(0,u.json)({menuDate:t,menu:{...m,_id:t.toJSON()}});throw e}},p=async({request:e})=>{const n=new URL(e.url),t=Object.fromEntries(await e.formData());console.log({formData:t});try{return await d.local.put(t),(0,u.redirect)(n.pathname.includes("plan")?"/preview":"/")}catch(e){return console.warn(e),(0,u.json)(null)}};var g=()=>{const{menuDate:e,menu:n}=(0,u.useLoaderData)(),t=(0,s.format)(new Date(e),"MMM do");return console.log("EditPage",{menu:n}),(0,r.jsxs)(i.Box,{mx:"auto",maxWidth:"500px",p:"3",children:[(0,r.jsxs)(i.Heading,{mt:"0",mb:"4",children:["Edit Weekly Menu - ",t]}),(0,r.jsx)(c.default,{menu:n})]})}})),n.register("6bwyZ",(function(t,a){e(t.exports,"default",(()=>d));var o=n("k4ank");n("8T3gX");var r=n("1idYv"),i=n("fIsAN"),s=n("fiQoM"),u=n("1xLD5");var d=({menu:e})=>(console.log({menu:e}),(0,o.jsx)(i.Form,{method:"post",children:(0,o.jsxs)(r.SimpleGrid,{spacingY:3,children:[s.DAYS.map((n=>(0,o.jsx)(u.default,{name:n,mb:"2",defaultValue:e[n],validations:{required:!0,maxLength:100}},n))),(0,o.jsx)("input",{type:"hidden",id:"_id",name:"_id",value:e._id}),(0,o.jsx)("input",{type:"hidden",id:"_rev",name:"_rev",value:e._rev}),(0,o.jsx)(r.Button,{type:"submit",colorScheme:"pink",width:"100%",maxWidth:[null,"10rem"],mb:"3",children:"Save"})]})}))}));
//# sourceMappingURL=EditPage.a9a5a063.js.map
